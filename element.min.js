!function(){const t=(t,e={},a=[])=>{let l=Object.assign(document.createElement(t),e);return l.append(...a),l},e=(e,a,l,o={})=>t("td",{className:e,part:a,innerHTML:l,...o});customElements.get("flag-olympic")||document.head.append(t("script",{src:"https://flagmeister.github.io/elements.flagmeister.min.js"})),customElements.whenDefined("flag-olympic").then(()=>{customElements.define("olympic-medal",class extends HTMLElement{connectedCallback(){this.innerHTML=this.getAttribute("count"),this.onclick=(t=>{this.closest("olympic-medal-ranking").sort(this.getAttribute("type"))})}}),customElements.define("olympic-medal-ranking",class extends HTMLElement{static get observedAttributes(){return["sort","filter","total"]}attributeChangedCallback(){this.isConnected&&this.connectedCallback()}constructor(){super().attachShadow({mode:"open"}).append(t("style",{innerHTML:"table{border-collapse:collapse;font:100% Arial;border:1px solid grey}td{padding:3px;text-align:left;border-bottom:1px solid lightgrey}.header,.rank,.flag,.medals{text-align:center;width:10%}.name{cursor:pointer}.medals{cursor:n-resize}.gold{background:gold}.silver{background:silver}.bronze{background:peru}.flag img{aspect-ration:4/3;display:inline-block;max-width:100%;border:1px solid grey;vertical-align:top}"}),this.table=t("table",{part:"table"}))}async connectedCallback(){setTimeout(()=>this.connectedCallback(),3e5);const a="https://olympics.com/OG2024/data/CIS_MedalNOCs~lang="+(this.getAttribute("lang")||"ENG")+"~comp=OG2024.json",l=t=>"https://olympics.com/en/paris-2024/medals/"+t.toLowerCase(),o={gold:t=>t.sort((t,e)=>e.gold-t.gold||e.silver-t.silver||e.bronze-t.bronze||e.total-t.total),silver:t=>t.sort((t,e)=>e.silver-t.silver||e.gold-t.gold||e.bronze-t.bronze||e.total-t.total),bronze:t=>t.sort((t,e)=>e.bronze-t.bronze||e.gold-t.gold||e.silver-t.silver||e.total-t.total),total:t=>t.sort((t,e)=>e.total-t.total||e.gold-t.gold||e.silver-t.silver||e.bronze-t.bronze)};let s=this.getAttribute("flag")||"olympic",i=this.getAttribute("games")||"Paris 2024",n=this.getAttribute("sort")||"gold",r=this.getAttribute("total")||10,c=this.getAttribute("score")||"total",d=this.getAttribute("filter");"all"==d?d="":"EU"==d&&(d="AUT,BEL,BUL,CRO,CYP,CZE,DEN,EST,FIN,FRA,GER,GRE,HUN,IRL,ITA,LAT,LTU,LUX,MLT,NED,POL,POR,ROU,SVK,SLO,ESP,SWE",r="all"),"population"==n&&(r=this.getAttribute("total")||999),"all"==r&&(r=999);const g=(await(await fetch(a)).json()).medalNOC,m=(o[n]||o.gold)(g.filter(t=>t.gender+t.sport=="TOTGLO")).map(t=>({country:{code:t.organisation.code,name:t.organisation.description,sort:t.organisation.descriptionOrder,flag:this.flag(t.organisation.code)},ranking:{rank:t.rank,equal:"Y"==t.rankEqual,total:t.rankTotal,totalEqual:"Y"==t.rankTotalEqual},medalcount:{gold:t.gold,silver:t.silver,bronze:t.bronze,total:t.total,score:"421"==c?4*t.gold+2*t.silver+t.bronze:"gold"==c?t.gold:t.total}}));this.table.replaceChildren(t("thead",{part:"thead"},[t("tr",{innerHTML:"<td colspan=3><flag-"+s+"></flag-"+s+"></td><td colspan="+("population"==n?6:5)+" class=header part=header><slot>"+i+"</slot></td>"})]),t("tbody",{part:"tbody"},[...m.slice(0,r).map(a=>{const{code:o,name:s,flag:i}=a.country,r="total"==n?a.ranking.total:a.ranking.rank;return d&&!d.includes(o)?"":t("tr",{part:o,onclick:t=>document.location=l(s)},[e("rank","rank",r),e("flag","flag","<flag-"+i+(this.hasAttribute("detailflags")&&"dm,do,do,ec,eg,fj,gt,kz,md,mn,mx,ug".includes(i)?" detail=1":"")+"></flag-"+i+">"),e("code","code",o),e("name","name",s),...["gold","silver","bronze","total"].map(t=>e("medals "+t,"medal medal"+t,a.medalcount[t],{onclick:e=>{e.stopPropagation(),this.sort(t)}})),"population"==n?e("medals-mpc","medal medal-mpc",`<medals-mpc lang=${i} score="${a.medalcount.score}" >calc&nbsp;${c}...</medals-mpc>`):""])})]))}flag(t){return this.flagmap=this.flagmap||"ALG:dz,AND:ad,ANG:ao,ANT:ag,ARM:am,ARU:aw,AUT:at,BAH:bs,BRN:bh,BAN:bd,BAR:bb,BLR:by,BEN:bj,BER:bm,BHU:bt,BIH:ba,BOT:bw,IVB:vg,BRU:bn,BUL:bg,BUR:bf,BDI:bi,CPV:cv,CAM:kh,CAY:ky,CAF:cf,CHA:td,CHI:cl,CHN:cn,COM:km,COD:cd,COK:ck,CRO:hr,DEN:dk,ESA:sv,GEQ:gq,EST:ee,FIJ:fj,GAM:gm,GER:de,GRN:gd,GUA:gt,GUI:gn,GBS:gw,GUY:gy,HAI:ht,HON:hn,INA:id,IRQ:iq,IRL:ie,ISR:il,JAM:jm,KAZ:kz,PRK:kp,KOR:kr,KOS:xk,KUW:kw,LAT:lv,LES:ls,LBR:lr,LBA:ly,MAD:mg,MAW:mw,MAS:my,MDV:mv,MLT:mt,MTN:mr,MRI:mu,MEX:mx,MGL:mn,MNE:me,MOZ:mz,MYA:mm,NEP:np,NED:nl,NCA:ni,NIG:ng,PAK:pk,PLW:pw,PLE:ps,PNG:pg,PAR:py,POL:pl,POR:pt,PUR:pr,SKN:kn,VIN:vc,SAM:ws,KSA:sa,SEN:sn,SRB:rs,SEY:sc,SVK:sk,SLO:si,SOL:sb,RSA:za,SRI:lk,SUD:sd,SUR:sr,SWZ:sz,SWE:se,SUI:ch,TPE:tw,TAN:tz,TOG:tg,TGA:to,TRI:tt,TUN:tn,TUR:tr,TKM:tm,UKR:ua,UAE:ae,URU:uy,VAN:vu,VIE:vn,ISV:vi,ZAM:zm,ZIM:zw".split(",").map(t=>t.split(":")).reduce((t,[e,a])=>(t[e]=a,t),{}),this.flagmap[t]||t.toLowerCase().substring(0,2)}sort(t){this.setAttribute("sort",t)}}),customElements.define("medals-mpc",class extends HTMLElement{async connectedCallback(){let t=this.getAttribute("lang")||"fr";window.cachedpopulation=window.cachedpopulation||{};let e,a=window.cachedpopulation[t];a?(console.log("cached",t,a),this.mpc(a)):(console.log("call api"),e=(await(await fetch(`https://restcountries.com/v3.1/alpha/${t}`)).json())[0],window.cachedpopulation[t]=e.population,this.mpc(e.population))}mpc(t,e,a=this.closest("tbody"),l=this.closest("tr"),o=1+~~a.getAttribute("mpc"),s="mpc"){this.mpc=(()=>{}),a.setAttribute(s,o),e=this.getAttribute("score")/t*1e6,this.title=this.getAttribute("score")+" / "+t,l[s]=this.innerText=e.toFixed(3),this.sort=((t=this.hasAttribute("desc"))=>a.replaceChildren(...[...a.rows].sort((e,a)=>(e[s]-a[s])*(t?1:-1)))),a.rows.length==o&&this.sort(0)}})})}();